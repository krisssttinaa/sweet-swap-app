(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,,,,,,,,function(e,a,t){e.exports=t(39)},,,,,,,,function(e,a,t){},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(12),l=t(5),s=t(3),o=t(40);t(21);var i=()=>{const[e,a]=Object(r.useState)([]),t=Object(s.o)();Object(r.useEffect)(()=>{(async()=>{try{const e=await o.a.get("http://88.200.63.148:8288/api/recipes/newest");a(e.data)}catch(e){console.error("Error fetching recipes:",e)}})()},[]);const c=e=>{t("/recipes/category/".concat(e))};return n.a.createElement("div",{className:"home"},n.a.createElement("header",{className:"home-header"},n.a.createElement("div",{className:"hero-image"},n.a.createElement("div",{className:"hero-text"},n.a.createElement("p",null,"Explore the world of sugar-free food")))),n.a.createElement("section",{className:"home-recipes"},n.a.createElement("div",{className:"recipe-categories"},n.a.createElement("div",{className:"category",onClick:()=>c("Salads")},n.a.createElement("img",{src:"/images/salad.jpg",alt:"Salads"}),n.a.createElement("p",null,"Salads")),n.a.createElement("div",{className:"category",onClick:()=>c("Vegetarian Dishes")},n.a.createElement("img",{src:"/images/vegetarian.jpg",alt:"Vegetarian Dishes"}),n.a.createElement("p",null,"Vegetarian Dishes")),n.a.createElement("div",{className:"category",onClick:()=>c("Low-Sugar Snacks")},n.a.createElement("img",{src:"/images/snacks.jpg",alt:"Low-Sugar Snacks"}),n.a.createElement("p",null,"Low-Sugar Snacks")),n.a.createElement("div",{className:"category",onClick:()=>c("Sugar-Free Desserts")},n.a.createElement("img",{src:"/images/sugar-free-desserts.jpg",alt:"Sugar-Free Desserts"}),n.a.createElement("p",null,"Sugar-Free Desserts")),n.a.createElement("div",{className:"category",onClick:()=>c("Healthy Beverages")},n.a.createElement("img",{src:"/images/beverages.jpg",alt:"Healthy Beverages"}),n.a.createElement("p",null,"Healthy Beverages")),n.a.createElement("div",{className:"category",onClick:()=>c("Low-Sugar Desserts")},n.a.createElement("img",{src:"/images/low-sugar-desserts.jpg",alt:"Low-Sugar Desserts"}),n.a.createElement("p",null,"Low-Sugar Desserts")),n.a.createElement("div",{className:"category",onClick:()=>c("Sugar-Free Snacks")},n.a.createElement("img",{src:"/images/sugar-free-snacks.jpg",alt:"Sugar-Free Snacks"}),n.a.createElement("p",null,"Sugar-Free Snacks")),n.a.createElement("div",{className:"category",onClick:()=>c("Non-Vegetarian Food")},n.a.createElement("img",{src:"/images/non-vegetarian.jpg",alt:"Non-Vegetarian Food"}),n.a.createElement("p",null,"Non-Vegetarian Food")))),n.a.createElement("section",{className:"home-new-recipes"},n.a.createElement("h2",null,"New recipes"),n.a.createElement("div",{className:"new-recipes-list"},e.length>0?e.map(e=>n.a.createElement("div",{className:"recipe-card",key:e.recipe_id},e.image_filename&&n.a.createElement("img",{src:"http://88.200.63.148:8288/uploads/".concat(e.image_filename),alt:e.title}),n.a.createElement("h3",null,e.title),n.a.createElement("button",{onClick:()=>{return a=e.recipe_id,void t("/recipe/".concat(a));var a}},"Recipe"))):n.a.createElement("p",null,"No recipes found."))))};t(26);var m=e=>{let{recipe:a,fetchRecipes:t}=e;const[c,l]=Object(r.useState)(!1),[i,m]=Object(r.useState)(!1),u=Object(s.o)(),p=localStorage.getItem("user_id");Object(r.useEffect)(()=>{(async()=>{try{const e=(await o.a.get("http://88.200.63.148:8288/api/saved/saved",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data;m(e.some(e=>e.recipe_id===a.recipe_id))}catch(e){console.error("Error checking saved status",e)}})()},[a.recipe_id]);return n.a.createElement("div",{className:"recipe-card",onClick:()=>{u("/recipe/".concat(a.recipe_id))}},a.image_filename&&n.a.createElement("img",{src:"http://88.200.63.148:8288/uploads/".concat(a.image_filename),alt:a.title,className:"recipe-image"}),n.a.createElement("div",{className:"recipe-content"},n.a.createElement("h4",null,a.title),n.a.createElement("p",null,a.instructions.substring(0,100),"...")),n.a.createElement("div",{className:"menu",onClick:e=>{e.stopPropagation(),l(!c)}},"\u2630",c&&n.a.createElement("div",{className:"menu-options"},p&&parseInt(p)===a.user_id&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{onClick:()=>{u("/edit-recipe/".concat(a.recipe_id))}},"Edit"),n.a.createElement("div",{onClick:async()=>{const e=localStorage.getItem("token");try{await o.a.delete("http://88.200.63.148:8288/api/recipes/".concat(a.recipe_id),{headers:{Authorization:"Bearer ".concat(e)}}),t()}catch(r){console.error("Error deleting recipe:",r)}}},"Delete")),i?n.a.createElement("div",{onClick:async()=>{try{await o.a.delete("http://88.200.63.148:8288/api/saved/unsave",{data:{recipeId:a.recipe_id},headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),m(!1),console.log("Recipe unsaved")}catch(e){console.error("Error unsaving recipe",e)}}},"Unsave"):n.a.createElement("div",{onClick:async()=>{try{await o.a.post("http://88.200.63.148:8288/api/saved/save",{recipeId:a.recipe_id},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),m(!0),console.log("Recipe saved")}catch(e){console.error("Error saving recipe",e)}}},"Save"),n.a.createElement("div",{onClick:()=>{console.log("Report recipe")}},"Report"))))};t(27);var u=()=>{const{category:e}=Object(s.q)(),[a,t]=Object(r.useState)([]),[c,l]=Object(r.useState)("all"),[i,u]=Object(r.useState)(!1),[p,d]=Object(r.useState)(e||"all"),g=Object(s.o)();Object(r.useEffect)(()=>{localStorage.getItem("token")&&u(!0)},[]);const E=Object(r.useCallback)(async()=>{const e=localStorage.getItem("token"),a=localStorage.getItem("user_id");try{let r;if("saved"===c)r=await o.a.get("http://88.200.63.148:8288/api/saved/saved",{headers:{Authorization:"Bearer ".concat(e)}}),"all"!==p&&(r={data:r.data.filter(e=>e.category===p)});else if("my"===c){if(!a)return void console.error("No user ID found. Cannot fetch user-specific recipes.");r=await o.a.get("http://88.200.63.148:8288/api/recipes",{headers:{Authorization:"Bearer ".concat(e)}}),r={data:r.data.filter(e=>e.user_id===parseInt(a)&&("all"===p||e.category===p))}}else r="all"===p?await o.a.get("http://88.200.63.148:8288/api/recipes"):await o.a.get("http://88.200.63.148:8288/api/recipes/category/".concat(p));t(r.data)}catch(r){console.error("Error fetching recipes:",r)}},[c,p]);Object(r.useEffect)(()=>{e&&d(e)},[e]),Object(r.useEffect)(()=>{E()},[E]);return n.a.createElement("div",{className:"recipe-list"},n.a.createElement("div",{className:"tabs"},n.a.createElement("button",{className:"saved"===c?"active":"",onClick:()=>l("saved")},"Saved Recipes"),n.a.createElement("button",{className:"all"===c?"active":"",onClick:()=>l("all")},"All Recipes"),n.a.createElement("button",{className:"my"===c?"active":"",onClick:()=>l("my")},"My Recipes")),n.a.createElement("div",{className:"recipe-header"},n.a.createElement("div",{className:"recipe-actions"},n.a.createElement("select",{className:"category-select",value:p,onChange:e=>{return a=e.target.value,d(a),void g("all"===a?"/recipes":"/recipes/category/".concat(a));var a}},n.a.createElement("option",{value:"all"},"All"),n.a.createElement("option",{value:"Salads"},"Salads"),n.a.createElement("option",{value:"Vegetarian Dishes"},"Vegetarian Dishes"),n.a.createElement("option",{value:"Low-Sugar Snacks"},"Low-Sugar Snacks"),n.a.createElement("option",{value:"Sugar-Free Desserts"},"Sugar-Free Desserts"),n.a.createElement("option",{value:"Healthy Beverages"},"Healthy Beverages"),n.a.createElement("option",{value:"Low-Sugar Desserts"},"Low-Sugar Desserts"),n.a.createElement("option",{value:"Sugar-Free Snacks"},"Sugar-Free Snacks"),n.a.createElement("option",{value:"Non-Vegetarian Food"},"Non-Vegetarian Food")),i&&n.a.createElement("button",{className:"add-recipe-button",onClick:()=>{g("/add-recipe")}},"+ Add Recipe"))),n.a.createElement("div",{className:"recipes-container"},a.length>0?a.map(e=>n.a.createElement(m,{key:e.recipe_id,recipe:e,fetchRecipes:E})):n.a.createElement("p",null,"No recipes found.")))};t(28);var p=()=>{const{id:e}=Object(s.q)(),[a,t]=Object(r.useState)(null),[c,l]=Object(r.useState)(""),[i,m]=Object(r.useState)("default.png"),[u,p]=Object(r.useState)([]),[d,g]=Object(r.useState)(""),[E,h]=Object(r.useState)(null),[v,f]=Object(r.useState)(""),[b,S]=Object(r.useState)(!1),[y,N]=Object(r.useState)(!1),w=Object(s.o)(),k=localStorage.getItem("user_id"),C=localStorage.getItem("token"),j=Object(r.useRef)(null),O=Object(r.useCallback)(async()=>{try{const a=await o.a.get("http://88.200.63.148:8288/api/comments/recipe/".concat(e),{headers:{Authorization:"Bearer ".concat(C)}});if(a.data&&Array.isArray(a.data)){const e=await Promise.all(a.data.map(async e=>{const a=await o.a.get("http://88.200.63.148:8288/api/users/".concat(e.user_id));return{...e,profile_picture:a.data.profile_picture||"default.png"}}));p(e)}}catch(a){console.error("Error fetching comments:",a)}},[e,C]);Object(r.useEffect)(()=>{(async()=>{try{const a=await o.a.get("http://88.200.63.148:8288/api/recipes/".concat(e));if(t(a.data),a.data.user_id){const e=await o.a.get("http://88.200.63.148:8288/api/users/".concat(a.data.user_id));l(e.data.username),m(e.data.profile_picture||"default.png")}if(C){const e=(await o.a.get("http://88.200.63.148:8288/api/saved/saved",{headers:{Authorization:"Bearer ".concat(C)}})).data;N(e.some(e=>e.recipe_id===a.data.recipe_id))}O()}catch(a){console.error("Error fetching recipe:",a)}})()},[e,C,O,k]);const _=async()=>{if(""!==v.trim())try{await o.a.put("http://88.200.63.148:8288/api/comments/".concat(E),{content:v},{headers:{Authorization:"Bearer ".concat(C)}}),O(),h(null),f("")}catch(e){console.error("Error updating comment:",e)}},D=e=>{j.current&&!j.current.contains(e.target)&&S(!1)};Object(r.useEffect)(()=>(b?document.addEventListener("mousedown",D):document.removeEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}),[b]);const F=e=>{const a=k===e.toString()?"/profile":"/user/".concat(e);w(a)};return a?n.a.createElement("div",{className:"recipe-details"},n.a.createElement("img",{className:"recipe-img",src:"http://88.200.63.148:8288/uploads/".concat(a.image_filename),alt:a.title}),n.a.createElement("div",{className:"recipe-info"},n.a.createElement("h2",null,a.title),n.a.createElement("p",{className:"author"},n.a.createElement("img",{src:"http://88.200.63.148:8288/uploads/".concat(i),alt:"Profile",className:"profile-picture"}),n.a.createElement("span",{onClick:()=>F(a.user_id),className:"username"},c)),a.products&&a.products.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Products"),n.a.createElement("ul",{className:"products-txt"},a.products.map(e=>n.a.createElement("li",{key:e.product_id},n.a.createElement("strong",null,e.name),n.a.createElement("br",null),n.a.createElement("em",null,e.description),n.a.createElement("br",null),"Price: ",e.price,", Brand: ",e.brand,", Shop: ",e.shop)))),n.a.createElement("h3",null,"Instructions"),n.a.createElement("p",{className:"instructions-txt"},a.instructions),n.a.createElement("h3",null,"Comments"),n.a.createElement("div",{className:"comments-section"},u.length>0?u.map((e,a)=>n.a.createElement("div",{key:e.comment_id||a,className:"comment"},n.a.createElement("img",{src:"http://88.200.63.148:8288/uploads/".concat(e.profile_picture),alt:e.username,className:"profile-picture"}),E===e.comment_id?n.a.createElement("div",null,n.a.createElement("textarea",{value:v,onChange:e=>f(e.target.value)}),n.a.createElement("button",{onClick:_},"Update"),n.a.createElement("button",{onClick:()=>h(null)},"Cancel")):n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,n.a.createElement("span",{onClick:()=>F(e.user_id),className:"username clickable-username"},e.username),": ",e.content),n.a.createElement("div",{className:"comments-details"},n.a.createElement("small",null,"Commented on: ",e.date_commented?new Date(e.date_commented).toLocaleString():"Date not available"),e.user_id===parseInt(k)&&n.a.createElement("div",{className:"comments-buttons-change"},n.a.createElement("button",{onClick:()=>{return a=e.comment_id,t=e.content,h(a),void f(t);var a,t}},"Edit"),n.a.createElement("button",{onClick:()=>(async e=>{try{await o.a.delete("http://88.200.63.148:8288/api/comments/".concat(e),{headers:{Authorization:"Bearer ".concat(C)}}),O()}catch(a){console.error("Error deleting comment:",a)}})(e.comment_id)},"Delete")))))):n.a.createElement("p",null,"No comments yet."),n.a.createElement("div",{className:"add-comment"},n.a.createElement("textarea",{value:d,onChange:e=>{g(e.target.value)},placeholder:"Add a comment...",rows:"3"}),n.a.createElement("button",{onClick:async()=>{if(""!==d.trim())try{await o.a.post("http://88.200.63.148:8288/api/comments",{recipe_id:e,user_id:k,content:d},{headers:{Authorization:"Bearer ".concat(C)}}),O(),g("")}catch(a){console.error("Error submitting comment:",a)}}},"Submit")))),k&&C&&n.a.createElement("div",{className:"menu",onClick:()=>{S(!b)},ref:j},n.a.createElement("div",{className:"burger-icon"},n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null)),b&&n.a.createElement("div",{className:"menu-options"},k===a.user_id.toString()&&n.a.createElement("div",{onClick:()=>{w("/edit-recipe/".concat(a.recipe_id))}},"Edit"),k===a.user_id.toString()&&n.a.createElement("div",{onClick:async()=>{try{await o.a.delete("http://88.200.63.148:8288/api/recipes/".concat(a.recipe_id),{headers:{Authorization:"Bearer ".concat(C)}}),w("/recipes")}catch(e){console.error("Error deleting recipe:",e)}}},"Delete"),y?n.a.createElement("div",{onClick:async()=>{try{await o.a.delete("http://88.200.63.148:8288/api/saved/unsave",{data:{recipeId:a.recipe_id},headers:{Authorization:"Bearer ".concat(C)}}),N(!1)}catch(e){console.error("Error unsaving recipe:",e)}}},"Unsave"):n.a.createElement("div",{onClick:async()=>{try{await o.a.post("http://88.200.63.148:8288/api/saved/save",{recipeId:a.recipe_id},{headers:{Authorization:"Bearer ".concat(C)}}),N(!0)}catch(e){console.error("Error saving recipe:",e)}}},"Save"),n.a.createElement("div",{onClick:()=>{console.log("Reporting recipe or comment.")}},"Report")))):n.a.createElement("div",null,"Loading...")};t(29);var d=()=>{const[e,a]=Object(r.useState)(""),[t,c]=Object(r.useState)(""),[l,i]=Object(r.useState)(""),[m,u]=Object(r.useState)(null),p=Object(s.o)();return n.a.createElement("div",{className:"add-recipe-container"},n.a.createElement("form",{onSubmit:async a=>{a.preventDefault();const r=localStorage.getItem("token"),n=localStorage.getItem("user_id"),c=(new Date).toISOString().slice(0,19).replace("T"," "),s=new FormData;s.append("title",e),s.append("instructions",t),s.append("category",l),s.append("date_created",c),m&&s.append("image",m),s.append("user_id",n);try{await o.a.post("http://88.200.63.148:8288/api/recipes/create",s,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}}),p("/recipes")}catch(i){console.error("Error adding recipe:",i)}},className:"add-recipe-form"},n.a.createElement("h2",null,"Add a New Recipe"),n.a.createElement("label",null,"Title"),n.a.createElement("input",{type:"text",value:e,onChange:e=>a(e.target.value),required:!0}),n.a.createElement("label",null,"Instructions"),n.a.createElement("textarea",{value:t,onChange:e=>c(e.target.value),required:!0}),n.a.createElement("label",null,"Category"),n.a.createElement("select",{value:l,onChange:e=>i(e.target.value),required:!0},n.a.createElement("option",{value:""},"Select a category"),n.a.createElement("option",{value:"Salads"},"Salads"),n.a.createElement("option",{value:"Vegetarian Dishes"},"Vegetarian Dishes"),n.a.createElement("option",{value:"Low-Sugar Snacks"},"Low-Sugar Snacks"),n.a.createElement("option",{value:"Sugar-Free Desserts"},"Sugar-Free Desserts"),n.a.createElement("option",{value:"Healthy Beverages"},"Healthy Beverages"),n.a.createElement("option",{value:"Low-Sugar Desserts"},"Low-Sugar Desserts"),n.a.createElement("option",{value:"Sugar-Free Snacks"},"Sugar-Free Snacks"),n.a.createElement("option",{value:"Non-Vegetarian Food"},"Non-Vegetarian Food")),n.a.createElement("label",null,"Image"),n.a.createElement("input",{type:"file",onChange:e=>u(e.target.files[0])}),n.a.createElement("div",{className:"button-group"},n.a.createElement("button",{type:"button",className:"cancel-button",onClick:()=>p(-1)},"Cancel"),n.a.createElement("button",{type:"submit",className:"add-recipe-button"},"Add Recipe"))))};var g=()=>{const[e,a]=Object(r.useState)([]);return Object(r.useEffect)(()=>{o.a.get("/api/messages").then(e=>{a(e.data)}).catch(e=>{console.error("Error fetching messages:",e)})},[]),n.a.createElement("div",null,n.a.createElement("h1",null,"Messages"),n.a.createElement("ul",null,e.map(e=>n.a.createElement("li",{key:e.message_id},n.a.createElement("p",null,e.content)))))};var E=()=>{const[e,a]=Object(r.useState)([]);return Object(r.useEffect)(()=>{o.a.get("/api/achievements").then(e=>{a(e.data)}).catch(e=>{console.error("Error fetching achievements:",e)})},[]),n.a.createElement("div",null,n.a.createElement("h1",null,"Achievements"),n.a.createElement("ul",null,e.map(e=>n.a.createElement("li",{key:e.achievement_id},n.a.createElement("p",null,e.title),n.a.createElement("p",null,e.description)))))};t(30);var h=()=>{const[e,a]=Object(r.useState)(""),[t,c]=Object(r.useState)(""),[l,i]=Object(r.useState)(!1),[m,u]=Object(r.useState)(""),p=Object(s.o)();return n.a.createElement("div",{className:"login-container"},n.a.createElement("div",{className:"login-card"},n.a.createElement("h2",{className:"login-title"},"Login"),n.a.createElement("form",{onSubmit:async a=>{a.preventDefault();try{const a=await o.a.post("http://88.200.63.148:8288/api/users/login",{username:e,password:t}),{token:r,user:n}=a.data;r&&n?(localStorage.setItem("token",r),localStorage.setItem("user_id",n.id),localStorage.setItem("username",n.username),p("/")):(u("Invalid credentials"),console.error("No token or user data found. Please log in again."))}catch(m){console.error("Login error",m),u("Invalid credentials")}},className:"login-form"},m&&n.a.createElement("p",{className:"error-message"},m),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"username"},"Username:"),n.a.createElement("input",{type:"text",id:"username",value:e,onChange:e=>a(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password:"),n.a.createElement("input",{type:l?"text":"password",id:"password",value:t,onChange:e=>c(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group show-password"},n.a.createElement("input",{type:"checkbox",id:"showPassword",checked:l,onChange:()=>i(!l)}),n.a.createElement("label",{htmlFor:"showPassword"},"Show password")),n.a.createElement("button",{type:"submit",className:"login-button"},"Login")),n.a.createElement("button",{type:"button",className:"register-link",onClick:()=>p("/register")},"or Register")))};t(31);var v=()=>{const[e,a]=Object(r.useState)(""),[t,c]=Object(r.useState)(""),[l,i]=Object(r.useState)(""),[m,u]=Object(r.useState)(""),[p,d]=Object(r.useState)(""),[g,E]=Object(r.useState)(""),[h,v]=Object(r.useState)(!1),f=Object(s.o)();return n.a.createElement("div",{className:"register-container"},n.a.createElement("div",{className:"register-card"},n.a.createElement("h2",{className:"register-title"},"Register"),n.a.createElement("form",{onSubmit:async a=>{a.preventDefault();try{const a=await o.a.post("http://88.200.63.148:8288/api/users/register",{username:e,name:t,surname:l,email:m,password:p,country:g,role:"user"});f("/login"),console.log(a.data)}catch(r){r.response?console.error("Registration error:",r.response.data):r.request?console.error("No response received:",r.request):console.error("Error:",r.message)}},className:"register-form"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"username"},"Username:"),n.a.createElement("input",{type:"text",id:"username",value:e,onChange:e=>a(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"name"},"Name:"),n.a.createElement("input",{type:"text",id:"name",value:t,onChange:e=>c(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"surname"},"Surname:"),n.a.createElement("input",{type:"text",id:"surname",value:l,onChange:e=>i(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email:"),n.a.createElement("input",{type:"email",id:"email",value:m,onChange:e=>u(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password:"),n.a.createElement("input",{type:h?"text":"password",id:"password",value:p,onChange:e=>d(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group show-password"},n.a.createElement("input",{type:"checkbox",id:"showPassword",checked:h,onChange:()=>v(!h)}),n.a.createElement("label",{htmlFor:"showPassword"},"Show password")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"country"},"Country:"),n.a.createElement("input",{type:"text",id:"country",value:g,onChange:e=>E(e.target.value),required:!0})),n.a.createElement("button",{type:"submit",className:"register-button"},"Register")),n.a.createElement("button",{className:"login-link-button",onClick:()=>f("/login")},"or Login")))};t(32);var f=()=>{const{id:e}=Object(s.q)(),[a,t]=Object(r.useState)(null),[c,l]=Object(r.useState)([]),[i,m]=Object(r.useState)(!1),[u,p]=Object(r.useState)("default.png"),[d,g]=Object(r.useState)(!1),[E,h]=Object(r.useState)({username:"",name:"",surname:"",email:"",password:"",dietaryGoals:""}),v=Object(s.o)(),f=localStorage.getItem("user_id");Object(r.useEffect)(()=>{(async()=>{const a=localStorage.getItem("token");if(a)try{const r=e||f,n=await o.a.get("http://88.200.63.148:8288/api/users/".concat(r),{headers:{Authorization:"Bearer ".concat(a)}});t(n.data),p(n.data.profile_picture||"default.png"),e||h({username:n.data.username,name:n.data.name,surname:n.data.surname,email:n.data.email,password:"********",dietaryGoals:n.data.dietary_goals||""})}catch(r){console.error("Error fetching profile:",r),v("/login")}else v("/login")})()},[e,f,v]),Object(r.useEffect)(()=>{(async()=>{if(a)try{const e=await o.a.get("http://88.200.63.148:8288/api/recipes");l(e.data.filter(e=>e.user_id===a.user_id))}catch(e){console.error("Error fetching recipes:",e)}})()},[a]);const b=e=>{const{name:a,value:t}=e.target;h({...E,[a]:t})},S=()=>{g(!1)};if(!a)return n.a.createElement("div",null,"Loading...");const y=a.user_id===parseInt(f);return n.a.createElement("div",{className:"profile-page"},n.a.createElement("h2",null,y?"Profile":"".concat(a.username,"'s Profile")),y&&i?n.a.createElement("div",{className:"edit-form"},n.a.createElement("label",null,"Username:"),n.a.createElement("input",{type:"text",name:"username",value:E.username,onChange:b}),n.a.createElement("label",null,"Name:"),n.a.createElement("input",{type:"text",name:"name",value:E.name,onChange:b}),n.a.createElement("label",null,"Surname:"),n.a.createElement("input",{type:"text",name:"surname",value:E.surname,onChange:b}),n.a.createElement("label",null,"Email:"),n.a.createElement("input",{type:"email",name:"email",value:E.email,onChange:b}),n.a.createElement("label",null,"Password:"),n.a.createElement("input",{type:"password",name:"password",value:E.password,onChange:b,placeholder:"Enter new password or leave blank"}),n.a.createElement("label",null,"Dietary Goals:"),n.a.createElement("textarea",{name:"dietaryGoals",value:E.dietaryGoals,onChange:b,rows:"3",placeholder:"Enter your dietary goals",className:"textarea-dietary-goals"}),n.a.createElement("label",null,"Select Profile Picture:"),n.a.createElement("img",{src:"http://88.200.63.148:8288/uploads/".concat(u),alt:"Profile",className:"profile-picture",onClick:()=>{g(!0)}}),n.a.createElement("div",{className:"button-group"},n.a.createElement("div",{className:"button-grouppp"},n.a.createElement("button",{className:"save",onClick:async()=>{const e=localStorage.getItem("token"),r={username:E.username,name:E.name,surname:E.surname,email:E.email,dietaryGoals:E.dietaryGoals,profilePicture:u};E.password&&"********"!==E.password&&(r.password=E.password);try{await o.a.put("http://88.200.63.148:8288/api/users/profile",r,{headers:{Authorization:"Bearer ".concat(e)}}),t({...a,...r,dietary_goals:r.dietaryGoals,profile_picture:r.profilePicture,password:a.password}),m(!1)}catch(n){console.error("Error updating profile:",n)}}},"Save"),n.a.createElement("button",{className:"cancel",onClick:()=>{h({username:a.username,name:a.name,surname:a.surname,email:a.email,password:"********",dietaryGoals:a.dietary_goals||""}),p(a.profile_picture||"default.png"),m(!1)}},"Cancel")),n.a.createElement("button",{className:"delete",onClick:async()=>{const e=localStorage.getItem("token");try{await o.a.delete("http://88.200.63.148:8288/api/users/profile",{headers:{Authorization:"Bearer ".concat(e)}}),localStorage.clear(),v("/login")}catch(a){console.error("Error deleting profile:",a)}}},"Delete Account")," ")):n.a.createElement("div",{className:"profile-info"},n.a.createElement("img",{src:"http://88.200.63.148:8288/uploads/".concat(a.profile_picture||"default.png"),alt:"Profile",className:"profile-pic"}),n.a.createElement("p",null,n.a.createElement("strong",null,"Username:")," ",a.username),n.a.createElement("p",null,n.a.createElement("strong",null,"Name:")," ",a.name),n.a.createElement("p",null,n.a.createElement("strong",null,"Surname:")," ",a.surname),n.a.createElement("p",null,n.a.createElement("strong",null,"Email:")," ",a.email),n.a.createElement("p",null,n.a.createElement("strong",null,"Dietary Goals:")," ",a.dietary_goals||"Not specified"),!e&&n.a.createElement("button",{className:"edit",onClick:()=>{m(!0)}},"Edit")),n.a.createElement("h3",null,y?"My Recipes":"".concat(a.username,"'s Recipes")),n.a.createElement("div",{className:"recipe-list"},0===c.length?n.a.createElement("p",null,"No recipes found."):c.map(e=>n.a.createElement("div",{key:e.recipe_id,className:"recipe-item",onClick:()=>v("/recipe/".concat(e.recipe_id))},e.image_filename&&n.a.createElement("img",{src:"http://88.200.63.148:8288/uploads/".concat(e.image_filename),alt:e.title,className:"recipe-image"}),n.a.createElement("div",{className:"recipe-content"},n.a.createElement("h4",null,e.title),n.a.createElement("p",null,e.instructions.substring(0,100),"..."))))),d&&n.a.createElement("div",{className:"picture-modal"},n.a.createElement("div",{className:"picture-grid"},["default.png","profile0.png","profile1.png","profile2.png","profile3.png","profile4.png","profile5.png","profile6.png","profile7.png","profile8.png","profile9.png","profile10.png","profile11.png","profile12.png","profile13.png","profile14.png"].map(e=>n.a.createElement("img",{key:e,src:"http://88.200.63.148:8288/uploads/".concat(e),alt:"Profile Option",className:"picture-option ".concat(u===e?"selected":""),onClick:()=>{p(e)}}))),n.a.createElement("div",{className:"modal-actions"},n.a.createElement("button",{onClick:S,className:"close"},"Close"),n.a.createElement("button",{onClick:S,className:"save"},"Save Selection"))))};t(33);var b=()=>{const e=Object(s.o)(),a=null!==localStorage.getItem("token"),t="moderator"===localStorage.getItem("role"),[c,o]=Object(r.useState)("");return Object(r.useEffect)(()=>{const e=()=>{const e=document.querySelector(".header");window.scrollY>50?e.classList.add("header-small"):e.classList.remove("header-small")};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"logo",onClick:()=>{e("/")},style:{cursor:"pointer"}},n.a.createElement("img",{src:"".concat("","/images/logo.png"),alt:"Sweet Swap"}),n.a.createElement("h1",null,"Sweet Swap")),n.a.createElement("form",{onSubmit:a=>{a.preventDefault(),c.trim()&&e("/search?query=".concat(c.trim()))},className:"search-form"},n.a.createElement("input",{type:"text",value:c,onChange:e=>{o(e.target.value)},placeholder:"Search...",className:"search-input"}),n.a.createElement("button",{type:"submit",className:"search-button"},"Search")),n.a.createElement("nav",{className:"navigation"},n.a.createElement(l.b,{to:"/",className:e=>{let{isActive:a}=e;return a?"active":""}},"Home"),n.a.createElement(l.b,{to:"/recipes",className:e=>{let{isActive:a}=e;return a?"active":""}},"Recipes"),a&&n.a.createElement(l.b,{to:"/profile",className:e=>{let{isActive:a}=e;return a?"active":""}},"Profile"),a&&t&&n.a.createElement(l.b,{to:"/moderate",className:e=>{let{isActive:a}=e;return a?"active":""}},"Moderate"),n.a.createElement(l.b,{to:"/contact",className:e=>{let{isActive:a}=e;return a?"active":""}},"Contact"),!a&&n.a.createElement(l.b,{to:"/login",className:e=>{let{isActive:a}=e;return a?"active":""}},"Login"),!a&&n.a.createElement(l.b,{to:"/register",className:e=>{let{isActive:a}=e;return a?"active":""}},"Register"),a&&n.a.createElement("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),e("/login")},className:"logout-button"},"Logout")))};t(34);var S=()=>n.a.createElement("footer",{className:"footer"},n.a.createElement("div",{className:"social-links"}),n.a.createElement("div",{className:"footer-separator"}),n.a.createElement("p",null,"\xa9 2024 Sweet Swap"));t(35);var y=()=>{const[e,a]=Object(r.useState)({name:"",email:"",message:""}),{name:t,email:c,message:l}=e,s=t=>{a({...e,[t.target.name]:t.target.value})};return n.a.createElement("div",{className:"contact-container"},n.a.createElement("div",{className:"contact-details"},n.a.createElement("h2",null,"Contact us"),n.a.createElement("p",null,"If you have any questions about our recipes or even suggestions, don't hesitate to contact us. We are looking forward to hearing from you!"),n.a.createElement("p",null,"E-mail: support@gmail.com")),n.a.createElement("div",{className:"contact-card"},n.a.createElement("h2",{className:"contact-title"},"Send us a message!"),n.a.createElement("form",{className:"contact-form",onSubmit:async t=>{t.preventDefault();try{await o.a.post("http://88.200.63.148:8288/api/contact",e),alert("Message sent successfully"),a({name:"",email:"",message:""})}catch(r){console.error(r),alert("Error sending message")}}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"name"},"Name:"),n.a.createElement("input",{type:"text",id:"name",name:"name",value:t,onChange:s,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email:"),n.a.createElement("input",{type:"email",id:"email",name:"email",value:c,onChange:s,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"message"},"Message:"),n.a.createElement("textarea",{id:"message",name:"message",value:l,onChange:s,required:!0})),n.a.createElement("button",{type:"submit",className:"contact-button"},"Send Message"))))};t(36);var N=()=>{const{id:e}=Object(s.q)(),[a,t]=Object(r.useState)(""),[c,l]=Object(r.useState)(""),[i,m]=Object(r.useState)(""),[u,p]=Object(r.useState)(null),d=Object(s.o)();Object(r.useEffect)(()=>{(async()=>{try{const a=(await o.a.get("http://88.200.63.148:8288/api/recipes/".concat(e))).data;t(a.title),l(a.instructions),m(a.category)}catch(a){console.error("Error fetching recipe details:",a)}})()},[e]);return n.a.createElement("div",{className:"edit-recipe-container"},n.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const r=localStorage.getItem("token"),n=new FormData;n.append("title",a),n.append("instructions",c),n.append("category",i),u&&n.append("image",u);try{await o.a.put("http://88.200.63.148:8288/api/recipes/".concat(e),n,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}}),d("/recipe/".concat(e))}catch(l){console.error("Error updating recipe:",l)}},className:"edit-recipe-form"},n.a.createElement("h2",null,"Edit Recipe"),n.a.createElement("label",null,"Title"),n.a.createElement("input",{type:"text",value:a,onChange:e=>t(e.target.value),required:!0}),n.a.createElement("label",null,"Instructions"),n.a.createElement("textarea",{value:c,onChange:e=>l(e.target.value),required:!0}),n.a.createElement("label",null,"Category"),n.a.createElement("select",{value:i,onChange:e=>m(e.target.value),required:!0},n.a.createElement("option",{value:""},"Select a category"),n.a.createElement("option",{value:"Salads"},"Salads"),n.a.createElement("option",{value:"Vegetarian Dishes"},"Vegetarian Dishes"),n.a.createElement("option",{value:"Low-Sugar Snacks"},"Low-Sugar Snacks"),n.a.createElement("option",{value:"Sugar-Free Desserts"},"Sugar-Free Desserts"),n.a.createElement("option",{value:"Healthy Beverages"},"Healthy Beverages"),n.a.createElement("option",{value:"Low-Sugar Desserts"},"Low-Sugar Desserts"),n.a.createElement("option",{value:"Sugar-Free Snacks"},"Sugar-Free Snacks"),n.a.createElement("option",{value:"Non-Vegetarian Food"},"Non-Vegetarian Food")),n.a.createElement("label",null,"Image"),n.a.createElement("input",{type:"file",onChange:e=>p(e.target.files[0])}),n.a.createElement("div",{className:"button-group"},n.a.createElement("button",{type:"button",className:"cancel-button",onClick:()=>d(-1)},"Cancel"),n.a.createElement("button",{type:"submit",className:"edit-recipe-button"},"Save Changes"))))};t(37);var w=()=>{const[e,a]=Object(r.useState)([]),t=Object(s.m)();return Object(r.useEffect)(()=>{(async()=>{const e=new URLSearchParams(t.search).get("query");if(e)try{const t=await o.a.get("http://88.200.63.148:8288/api/recipes/search?query=".concat(e));a(t.data)}catch(r){console.error("Error fetching search results:",r)}})()},[t.search]),n.a.createElement("div",{className:"search-results"},e.length>0?n.a.createElement("div",{className:"search-results-container"},e.map(e=>n.a.createElement(m,{key:e.recipe_id,recipe:e}))):n.a.createElement("p",null,"No results found for your search."))};var k=()=>n.a.createElement(l.a,null,n.a.createElement(b,null),n.a.createElement(s.c,null,n.a.createElement(s.a,{exact:!0,path:"/",element:n.a.createElement(i,null)}),n.a.createElement(s.a,{path:"/recipes",element:n.a.createElement(u,null)}),n.a.createElement(s.a,{path:"/recipe/:id",element:n.a.createElement(p,null)}),n.a.createElement(s.a,{path:"/add-recipe",element:n.a.createElement(d,null)}),n.a.createElement(s.a,{path:"/messages",element:n.a.createElement(g,null)}),n.a.createElement(s.a,{path:"/achievements",element:n.a.createElement(E,null)}),n.a.createElement(s.a,{path:"/login",element:n.a.createElement(h,null)}),n.a.createElement(s.a,{path:"/register",element:n.a.createElement(v,null)}),n.a.createElement(s.a,{path:"/profile",element:n.a.createElement(f,null)})," ",n.a.createElement(s.a,{path:"/user/:id",element:n.a.createElement(f,null)})," ",n.a.createElement(s.a,{path:"/contact",element:n.a.createElement(y,null)}),n.a.createElement(s.a,{path:"/recipes/category/:category",element:n.a.createElement(u,null)}),n.a.createElement(s.a,{path:"/edit-recipe/:id",element:n.a.createElement(N,null)}),n.a.createElement(s.a,{path:"/search",element:n.a.createElement(w,null)})),n.a.createElement(S,null));t(38);o.a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(console.error("Unauthorized access - Redirecting to login."),localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));const C=document.getElementById("root");Object(c.createRoot)(C).render(n.a.createElement(k,null))}],[[13,1,2]]]);
//# sourceMappingURL=main.6c96c901.chunk.js.map